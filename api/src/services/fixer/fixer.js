import fetch from 'node-fetch'

export const getFixer = async ({ data }) => {
  // const response = await fetch(
  //   `http://data.fixer.io/api/latest?access_key=ab7661fa5277a55870ddb441b45d59ce`
  // )
  const response = {
    success: true,
    timestamp: 1594155125,
    base: 'EUR',
    date: '2020-07-07',
    rates: {
      AED: 4.140437,
      AFN: 86.942025,
      ALL: 123.90246,
      AMD: 546.859797,
      ANG: 2.022815,
      AOA: 648.805282,
      ARS: 79.894026,
      AUD: 1.623509,
      AWG: 2.02908,
      AZN: 1.916481,
      BAM: 1.954403,
      BBD: 2.275317,
      BDT: 95.556545,
      BGN: 1.95388,
      BHD: 0.425086,
      BIF: 2165.47975,
      BMD: 1.127267,
      BND: 1.572868,
      BOB: 7.781304,
      BRL: 6.074283,
      BSD: 1.126917,
      BTC: 0.000122,
      BTN: 84.377,
      BWP: 13.203456,
      BYN: 2.754289,
      BYR: 22094.4316,
      BZD: 2.270421,
      CAD: 1.533365,
      CDF: 2169.988885,
      CHF: 1.062449,
      CLF: 0.03225,
      CLP: 889.86476,
      CNY: 7.906651,
      COP: 4087.481119,
      CRC: 656.595634,
      CUC: 1.127267,
      CUP: 29.872573,
      CVE: 110.357278,
      CZK: 26.724682,
      DJF: 200.338074,
      DKK: 7.450987,
      DOP: 65.889316,
      DZD: 145.308214,
      EGP: 18.069867,
      ERN: 16.90929,
      ETB: 39.623533,
      EUR: 1,
      FJD: 2.444989,
      FKP: 0.898976,
      GBP: 0.898911,
      GEL: 3.460684,
      GGP: 0.898976,
      GHS: 6.526848,
      GIP: 0.898976,
      GMD: 58.205718,
      GNF: 10838.671463,
      GTQ: 8.677202,
      GYD: 235.74532,
      HKD: 8.736826,
      HNL: 28.103038,
      HRK: 7.547014,
      HTG: 123.350371,
      HUF: 354.615849,
      IDR: 16231.854537,
      ILS: 3.881247,
      IMP: 0.898976,
      INR: 84.437985,
      IQD: 1341.447633,
      IRR: 101707.657304,
      ISK: 157.220453,
      JEP: 0.898976,
      JMD: 158.680686,
      JOD: 0.799256,
      JPY: 121.228586,
      KES: 120.313094,
      KGS: 87.57455,
      KHR: 4624.049037,
      KMF: 491.770212,
      KPW: 1014.608935,
      KRW: 1349.15821,
      KWD: 0.347142,
      KYD: 0.939064,
      KZT: 462.342416,
      LAK: 10193.874818,
      LBP: 1708.936805,
      LKR: 209.464804,
      LRD: 224.721279,
      LSL: 19.242244,
      LTL: 3.328526,
      LVL: 0.681872,
      LYD: 1.572513,
      MAD: 10.871926,
      MDL: 19.468485,
      MGA: 4336.596442,
      MKD: 61.547129,
      MMK: 1538.798706,
      MNT: 3187.579438,
      MOP: 8.995853,
      MRO: 402.43468,
      MUR: 44.932626,
      MVR: 17.370977,
      MWK: 828.540914,
      MXN: 25.775635,
      MYR: 4.818501,
      MZN: 79.117169,
      NAD: 19.242626,
      NGN: 436.813245,
      NIO: 38.879784,
      NOK: 10.713562,
      NPR: 135.003234,
      NZD: 1.722128,
      OMR: 0.433975,
      PAB: 1.126917,
      PEN: 3.995483,
      PGK: 3.886253,
      PHP: 55.911919,
      PKR: 188.029495,
      PLN: 4.474923,
      PYG: 7700.76726,
      QAR: 4.104399,
      RON: 4.838789,
      RSD: 117.607836,
      RUB: 80.604993,
      RWF: 1073.72174,
      SAR: 4.22832,
      SBD: 9.36672,
      SCR: 19.839209,
      SDG: 62.309723,
      SEK: 10.442477,
      SGD: 1.572966,
      SHP: 0.898976,
      SLL: 10990.852256,
      SOS: 657.196497,
      SRD: 8.407159,
      STD: 24856.626186,
      SVC: 9.860275,
      SYP: 578.26712,
      SZL: 19.242241,
      THB: 35.20475,
      TJS: 11.602129,
      TMT: 3.945434,
      TND: 3.21412,
      TOP: 2.56938,
      TRY: 7.73294,
      TTD: 7.614235,
      TWD: 33.234103,
      TZS: 2613.312497,
      UAH: 30.333951,
      UGX: 4190.040537,
      USD: 1.127267,
      UYU: 48.237211,
      UZS: 11496.995193,
      VEF: 11.258574,
      VND: 26152.592506,
      VUV: 130.388281,
      WST: 2.972349,
      XAF: 655.443533,
      XAG: 0.061778,
      XAU: 0.000628,
      XCD: 3.046495,
      XDR: 0.81736,
      XOF: 658.32438,
      XPF: 120.046046,
      YER: 282.211558,
      ZAR: 19.358777,
      ZMK: 10146.756426,
      ZMW: 20.199876,
      ZWL: 362.979949,
    },
  }
  // const json = await response.json()
  const json = response
  const objectArray = Object.entries(json.rates)
  console.log(objectArray)
  const objectArray2 = objectArray.map((subArray) => {
    return {
      currency: subArray[0],
      rate: subArray[1],
    }
  })

  return {
    data,
    success: json.success,
    timestamp: json.timestamp,
    base: json.base,
    date: json.date,
    rates: objectArray2,
  }
}
